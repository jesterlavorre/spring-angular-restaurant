{"ast":null,"code":"import { Order } from '../models/Order';\nimport { User } from '../models/User';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/backend.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction OrderFoodComponent_div_30_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ingredient_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ingredient_r3.name, \" - \", ingredient_r3.amount, \" \");\n  }\n}\nfunction OrderFoodComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 11);\n    i0.ɵɵelementStart(4, \"p\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n    i0.ɵɵtext(10, \"Ingredients:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"ul\");\n    i0.ɵɵtemplate(12, OrderFoodComponent_div_30_li_12_Template, 2, 2, \"li\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 13)(14, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function OrderFoodComponent_div_30_Template_input_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const dish_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(dish_r1.orderAmount = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function OrderFoodComponent_div_30_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const dish_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.orderDish(dish_r1.id));\n    });\n    i0.ɵɵtext(16, \"Order\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const dish_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dish_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", dish_r1.name);\n    i0.ɵɵproperty(\"src\", dish_r1.picture, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", dish_r1.price, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", dish_r1.ingredients);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", dish_r1.orderAmount);\n  }\n}\nexport class OrderFoodComponent {\n  constructor(http, router, services) {\n    this.http = http;\n    this.router = router;\n    this.services = services;\n    this.allDishes = [];\n    this.orderAmount = '';\n  }\n  goToDeliveryView() {\n    this.router.navigate(['delivery-view']);\n  }\n  goToReservarionView() {\n    this.router.navigate(['reservation-view']);\n  }\n  goToHome() {\n    this.router.navigate(['customer']);\n  }\n  goToChangePassword() {\n    this.router.navigate(['change-password']);\n  }\n  goToProfile() {\n    this.router.navigate(['profile']);\n  }\n  goToRestaurantDetails(id) {\n    this.services.currentRestaurantBeingViewedId = id;\n    this.router.navigate(['restaurant-view']);\n  }\n  logout() {\n    this.services.activeUser = new User('', '', '', '', '', '', '', '', '', '', '', '', '', '', '');\n    this.router.navigate(['']);\n  }\n  ngOnInit() {\n    this.services.getDished(this.services.currentRestaurantBeingViewedId).subscribe(response => {\n      this.allDishes = response;\n    });\n  }\n  orderDish(dishId) {\n    const dish = this.allDishes.find(d => d.id === dishId);\n    if (dish) {\n      this.services.getRestaurantInfo(this.services.currentRestaurantBeingViewedId).subscribe(response => {\n        // Check if there are any orders in the list\n        if (this.services.order.length > 0) {\n          // Get the restaurantId of the first order\n          const currentRestaurantId = this.services.order[0].restaurantId;\n          // Check if the current restaurant being viewed matches the restaurantId of the existing orders\n          if (currentRestaurantId !== this.services.currentRestaurantBeingViewedId) {\n            alert('You cannot buy from multiple restaurants at the same time.');\n            return;\n          }\n        }\n        // Check if an order with the same dishId already exists\n        const existingOrder = this.services.order.find(order => order.dishId === dish.id);\n        if (existingOrder) {\n          // Update the existing order's amount\n          existingOrder.amount = (+existingOrder.amount + +dish.orderAmount).toString();\n        } else {\n          // If no existing order, create a new one and add it to the list\n          this.services.order.push(new Order(this.services.activeUser.username, dish.id, dish.orderAmount, this.services.currentRestaurantBeingViewedId, response.restaurant.name));\n        }\n        alert('Dish added');\n        console.log(this.services.order);\n      });\n    }\n  }\n  toggleBasket() {\n    this.router.navigate(['basket']);\n  }\n  static #_ = this.ɵfac = function OrderFoodComponent_Factory(t) {\n    return new (t || OrderFoodComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.BackendService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderFoodComponent,\n    selectors: [[\"app-order-food\"]],\n    decls: 38,\n    vars: 1,\n    consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [\"href\", \"/\"], [1, \"logo\", 3, \"click\"], [1, \"buttons\"], [3, \"click\"], [1, \"dishes-container\"], [\"class\", \"dish-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"footer\"], [1, \"dish-card\"], [1, \"dish-image\", 3, \"src\", \"alt\"], [4, \"ngFor\", \"ngForOf\"], [1, \"order-section\"], [\"type\", \"text\", \"placeholder\", \"Enter amount\", 3, \"ngModel\", \"ngModelChange\"]],\n    template: function OrderFoodComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n        i0.ɵɵelementStart(4, \"title\");\n        i0.ɵɵtext(5, \"Dishes\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"base\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"body\")(8, \"header\")(9, \"div\", 4);\n        i0.ɵɵlistener(\"click\", function OrderFoodComponent_Template_div_click_9_listener() {\n          return ctx.goToHome();\n        });\n        i0.ɵɵtext(10, \"Restaurant of cringe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 5)(12, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function OrderFoodComponent_Template_button_click_12_listener() {\n          return ctx.goToDeliveryView();\n        });\n        i0.ɵɵtext(13, \"Deliveries\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 5)(15, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function OrderFoodComponent_Template_button_click_15_listener() {\n          return ctx.goToReservarionView();\n        });\n        i0.ɵɵtext(16, \"Reservations\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 5)(18, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function OrderFoodComponent_Template_button_click_18_listener() {\n          return ctx.goToChangePassword();\n        });\n        i0.ɵɵtext(19, \"Change password\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 5)(21, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function OrderFoodComponent_Template_button_click_21_listener() {\n          return ctx.goToProfile();\n        });\n        i0.ɵɵtext(22, \"Profile\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 5)(24, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function OrderFoodComponent_Template_button_click_24_listener() {\n          return ctx.logout();\n        });\n        i0.ɵɵtext(25, \"Logout\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 5)(27, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function OrderFoodComponent_Template_button_click_27_listener() {\n          return ctx.toggleBasket();\n        });\n        i0.ɵɵtext(28, \"Basket\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"div\", 7);\n        i0.ɵɵtemplate(30, OrderFoodComponent_div_30_Template, 17, 6, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"br\")(32, \"br\")(33, \"br\")(34, \"br\");\n        i0.ɵɵelementStart(35, \"div\", 9)(36, \"p\");\n        i0.ɵɵtext(37, \"\\u00A9 2024 pravi majstor. All rights reserved.\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(30);\n        i0.ɵɵproperty(\"ngForOf\", ctx.allDishes);\n      }\n    },\n    dependencies: [i4.NgForOf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n    styles: [\"\\n\\nbody[_ngcontent-%COMP%] {\\n  font-family: Arial, sans-serif;\\n  line-height: 1.6;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n\\n\\nheader[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: #fff;\\n  padding: 10px 20px;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n\\n\\n.logo[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n}\\n\\n\\n\\nheader[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 10px;\\n}\\n\\nheader[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  background-color: #555;\\n  color: white;\\n  border: none;\\n  padding: 10px 15px;\\n  cursor: pointer;\\n  border-radius: 5px;\\n  margin-left: 10px;\\n}\\n\\nheader[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n  background-color: #777;\\n}\\n\\n\\n\\n.dishes-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: 20px;\\n}\\n\\n\\n\\n.dish-card[_ngcontent-%COMP%] {\\n  border: 1px solid #ddd;\\n  border-radius: 5px;\\n  padding: 20px;\\n  width: 300px;\\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n}\\n\\n\\n\\n.dish-image[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 200px;\\n  object-fit: cover;\\n  border-radius: 5px;\\n}\\n\\n\\n\\n.order-section[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  margin-top: 10px;\\n}\\n\\n\\n\\ninput[type=\\\"number\\\"][_ngcontent-%COMP%] {\\n  width: 60px;\\n  padding: 5px;\\n}\\n\\n\\n\\nbutton[_ngcontent-%COMP%] {\\n  padding: 5px 10px;\\n  border: none;\\n  background-color: #007bff;\\n  color: white;\\n  border-radius: 3px;\\n  cursor: pointer;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: #0056b3;\\n}\\n\\n\\n\\n@media (max-width: 768px) {\\n  .dishes-container[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    align-items: stretch;\\n  }\\n\\n  .dish-card[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n}\\n.footer[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: white;\\n  text-align: center;\\n  padding: 20px;\\n  position: fixed;\\n  bottom: 0;\\n  width: 100%;\\n}\\n.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvb3JkZXItZm9vZC9vcmRlci1mb29kLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbUJBQW1CO0FBQ25CO0VBQ0UsOEJBQThCO0VBQzlCLGdCQUFnQjtFQUNoQixTQUFTO0VBQ1QsVUFBVTtBQUNaOztBQUVBLGtCQUFrQjtBQUNsQjtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsbUJBQW1CO0FBQ3JCOztBQUVBLGdCQUFnQjtBQUNoQjtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUI7QUFDbkI7O0FBRUEseUJBQXlCO0FBQ3pCO0VBQ0UsYUFBYTtFQUNiLFNBQVM7QUFDWDs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQSw0QkFBNEI7QUFDNUI7RUFDRSxhQUFhO0VBQ2IsZUFBZTtFQUNmLFNBQVM7QUFDWDs7QUFFQSxxQkFBcUI7QUFDckI7RUFDRSxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYixZQUFZO0VBQ1osd0NBQXdDO0VBQ3hDLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0FBQ3JCOztBQUVBLHNCQUFzQjtBQUN0QjtFQUNFLFdBQVc7RUFDWCxhQUFhO0VBQ2IsaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjs7QUFFQSx5QkFBeUI7QUFDekI7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFNBQVM7RUFDVCxnQkFBZ0I7QUFDbEI7O0FBRUEsaUJBQWlCO0FBQ2pCO0VBQ0UsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRSxpQkFBaUI7RUFDakIsWUFBWTtFQUNaLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUEscUNBQXFDO0FBQ3JDO0VBQ0U7SUFDRSxzQkFBc0I7SUFDdEIsb0JBQW9CO0VBQ3RCOztFQUVBO0lBQ0UsV0FBVztFQUNiO0FBQ0Y7QUFDQTtFQUNFLHNCQUFzQjtFQUN0QixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYixlQUFlO0VBQ2YsU0FBUztFQUNULFdBQVc7QUFDYjtBQUNBO0VBQ0UsU0FBUztBQUNYIiwic291cmNlc0NvbnRlbnQiOlsiLyogR2VuZXJhbCBTdHlsZXMgKi9cclxuYm9keSB7XHJcbiAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gIGxpbmUtaGVpZ2h0OiAxLjY7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHBhZGRpbmc6IDA7XHJcbn1cclxuXHJcbi8qIEhlYWRlciBTdHlsZXMgKi9cclxuaGVhZGVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4vKiBMb2dvIFN0eWxlcyAqL1xyXG4ubG9nbyB7XHJcbiAgZm9udC1zaXplOiAxLjVyZW07XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi8qIEhlYWRlciBCdXR0b24gU3R5bGVzICovXHJcbmhlYWRlciAuYnV0dG9ucyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBnYXA6IDEwcHg7XHJcbn1cclxuXHJcbmhlYWRlciAuYnV0dG9ucyBidXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBwYWRkaW5nOiAxMHB4IDE1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG5cclxuaGVhZGVyIC5idXR0b25zIGJ1dHRvbjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzc3NztcclxufVxyXG5cclxuLyogRGlzaGVzIENvbnRhaW5lciBTdHlsZXMgKi9cclxuLmRpc2hlcy1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC13cmFwOiB3cmFwO1xyXG4gIGdhcDogMjBweDtcclxufVxyXG5cclxuLyogRGlzaCBDYXJkIFN0eWxlcyAqL1xyXG4uZGlzaC1jYXJkIHtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIHdpZHRoOiAzMDBweDtcclxuICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4vKiBEaXNoIEltYWdlIFN0eWxlcyAqL1xyXG4uZGlzaC1pbWFnZSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAyMDBweDtcclxuICBvYmplY3QtZml0OiBjb3ZlcjtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuXHJcbi8qIE9yZGVyIFNlY3Rpb24gU3R5bGVzICovXHJcbi5vcmRlci1zZWN0aW9uIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZ2FwOiAxMHB4O1xyXG4gIG1hcmdpbi10b3A6IDEwcHg7XHJcbn1cclxuXHJcbi8qIElucHV0IFN0eWxlcyAqL1xyXG5pbnB1dFt0eXBlPVwibnVtYmVyXCJdIHtcclxuICB3aWR0aDogNjBweDtcclxuICBwYWRkaW5nOiA1cHg7XHJcbn1cclxuXHJcbi8qIEJ1dHRvbiBTdHlsZXMgKi9cclxuYnV0dG9uIHtcclxuICBwYWRkaW5nOiA1cHggMTBweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuYnV0dG9uOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzO1xyXG59XHJcblxyXG4vKiBNZWRpYSBRdWVyaWVzIGZvciBSZXNwb25zaXZlbmVzcyAqL1xyXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAuZGlzaGVzLWNvbnRhaW5lciB7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XHJcbiAgfVxyXG5cclxuICAuZGlzaC1jYXJkIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIH1cclxufVxyXG4uZm9vdGVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5mb290ZXIgcCB7XHJcbiAgbWFyZ2luOiAwO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["Order","User","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","ingredient_r3","name","amount","ɵɵelement","ɵɵtemplate","OrderFoodComponent_div_30_li_12_Template","ɵɵlistener","OrderFoodComponent_div_30_Template_input_ngModelChange_14_listener","$event","restoredCtx","ɵɵrestoreView","_r5","dish_r1","$implicit","ɵɵresetView","orderAmount","OrderFoodComponent_div_30_Template_button_click_15_listener","ctx_r6","ɵɵnextContext","orderDish","id","ɵɵtextInterpolate","ɵɵpropertyInterpolate","ɵɵproperty","picture","ɵɵsanitizeUrl","ɵɵtextInterpolate1","price","ingredients","OrderFoodComponent","constructor","http","router","services","allDishes","goToDeliveryView","navigate","goToReservarionView","goToHome","goToChangePassword","goToProfile","goToRestaurantDetails","currentRestaurantBeingViewedId","logout","activeUser","ngOnInit","getDished","subscribe","response","dishId","dish","find","d","getRestaurantInfo","order","length","currentRestaurantId","restaurantId","alert","existingOrder","toString","push","username","restaurant","console","log","toggleBasket","_","ɵɵdirectiveInject","i1","HttpClient","i2","Router","i3","BackendService","_2","selectors","decls","vars","consts","template","OrderFoodComponent_Template","rf","ctx","OrderFoodComponent_Template_div_click_9_listener","OrderFoodComponent_Template_button_click_12_listener","OrderFoodComponent_Template_button_click_15_listener","OrderFoodComponent_Template_button_click_18_listener","OrderFoodComponent_Template_button_click_21_listener","OrderFoodComponent_Template_button_click_24_listener","OrderFoodComponent_Template_button_click_27_listener","OrderFoodComponent_div_30_Template"],"sources":["d:\\Users\\Admin\\Desktop\\PIA\\2023-24\\projekat\\sveze skinuti pocetni\\frontend\\src\\app\\order-food\\order-food.component.ts","d:\\Users\\Admin\\Desktop\\PIA\\2023-24\\projekat\\sveze skinuti pocetni\\frontend\\src\\app\\order-food\\order-food.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BackendService } from '../services/backend.service';\nimport { Dishes } from '../models/Dishes';\nimport { Order } from '../models/Order';\nimport { User } from '../models/User';\n\n@Component({\n  selector: 'app-order-food',\n  templateUrl: './order-food.component.html',\n  styleUrls: ['./order-food.component.css'],\n})\nexport class OrderFoodComponent {\n  constructor(\n    private http: HttpClient,\n    private router: Router,\n    public services: BackendService\n  ) {}\n  goToDeliveryView() {\n    this.router.navigate(['delivery-view']);\n  }\n  goToReservarionView() {\n    this.router.navigate(['reservation-view']);\n  }\n  goToHome() {\n    this.router.navigate(['customer']);\n  }\n  goToChangePassword() {\n    this.router.navigate(['change-password']);\n  }\n\n  goToProfile() {\n    this.router.navigate(['profile']);\n  }\n  goToRestaurantDetails(id: string) {\n    this.services.currentRestaurantBeingViewedId = id;\n    this.router.navigate(['restaurant-view']);\n  }\n  logout() {\n    this.services.activeUser = new User(\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      ''\n    );\n    this.router.navigate(['']);\n  }\n  allDishes: Dishes[] = [];\n\n  orderAmount: string = '';\n  ngOnInit() {\n    this.services\n      .getDished(this.services.currentRestaurantBeingViewedId)\n      .subscribe((response) => {\n        this.allDishes = response;\n      });\n  }\n\n  orderDish(dishId: string) {\n    const dish = this.allDishes.find((d) => d.id === dishId);\n\n    if (dish) {\n      this.services\n        .getRestaurantInfo(this.services.currentRestaurantBeingViewedId)\n        .subscribe((response) => {\n          // Check if there are any orders in the list\n          if (this.services.order.length > 0) {\n            // Get the restaurantId of the first order\n            const currentRestaurantId = this.services.order[0].restaurantId;\n\n            // Check if the current restaurant being viewed matches the restaurantId of the existing orders\n            if (\n              currentRestaurantId !==\n              this.services.currentRestaurantBeingViewedId\n            ) {\n              alert(\n                'You cannot buy from multiple restaurants at the same time.'\n              );\n              return;\n            }\n          }\n\n          // Check if an order with the same dishId already exists\n          const existingOrder = this.services.order.find(\n            (order) => order.dishId === dish.id\n          );\n\n          if (existingOrder) {\n            // Update the existing order's amount\n            existingOrder.amount = (\n              +existingOrder.amount + +dish.orderAmount\n            ).toString();\n          } else {\n            // If no existing order, create a new one and add it to the list\n            this.services.order.push(\n              new Order(\n                this.services.activeUser.username,\n                dish.id,\n                dish.orderAmount,\n                this.services.currentRestaurantBeingViewedId,\n                response.restaurant.name\n              )\n            );\n          }\n\n          alert('Dish added');\n          console.log(this.services.order);\n        });\n    }\n  }\n\n  toggleBasket() {\n    this.router.navigate(['basket']);\n  }\n}\n","<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Dishes</title>\n    <base href=\"/\" />\n  </head>\n  <body>\n    <header>\n      <div class=\"logo\" (click)=\"goToHome()\">Restaurant of cringe</div>\n      <div class=\"buttons\">\n        <button (click)=\"goToDeliveryView()\">Deliveries</button>\n      </div>\n      <div class=\"buttons\">\n        <button (click)=\"goToReservarionView()\">Reservations</button>\n      </div>\n      <div class=\"buttons\">\n        <button (click)=\"goToChangePassword()\">Change password</button>\n      </div>\n      <div class=\"buttons\">\n        <button (click)=\"goToProfile()\">Profile</button>\n      </div>\n      <!-- <div class=\"buttons\">\n          <button (click)=\"goToRestaurants()\">Restaurants</button>\n        </div> -->\n      <div class=\"buttons\">\n        <button (click)=\"logout()\">Logout</button>\n      </div>\n      <div class=\"buttons\">\n        <button (click)=\"toggleBasket()\">Basket</button>\n      </div>\n    </header>\n\n    <div class=\"dishes-container\">\n      <div class=\"dish-card\" *ngFor=\"let dish of allDishes\">\n        <h2>{{ dish.name }}</h2>\n        <img [src]=\"dish.picture\" alt=\"{{ dish.name }}\" class=\"dish-image\" />\n        <p><strong>Price:</strong> {{ dish.price }}</p>\n        <p><strong>Ingredients:</strong></p>\n        <ul>\n          <li *ngFor=\"let ingredient of dish.ingredients\">\n            {{ ingredient.name }} - {{ ingredient.amount }}\n          </li>\n        </ul>\n        <div class=\"order-section\">\n          <input\n            type=\"text\"\n            [(ngModel)]=\"dish.orderAmount\"\n            placeholder=\"Enter amount\"\n          />\n          <button (click)=\"orderDish(dish.id)\">Order</button>\n        </div>\n      </div>\n    </div>\n    <br />\n    <br />\n    <br />\n    <br />\n    <div class=\"footer\">\n      <p>&copy; 2024 pravi majstor. All rights reserved.</p>\n    </div>\n  </body>\n</html>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}