<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Information</title>
  </head>
  <body>
    <header>
      <div class="logo" (click)="goToHome()">
        {{
          services.activeUser.accountTypeId === "2"
            ? "Konobar"
            : "Restaurant of cringe"
        }}
      </div>
      <div class="buttons" *ngIf="services.activeUser.accountTypeId === '2'">
        <button (click)="goToDiagrams()">Diagrams</button>
      </div>
      <!-- Conditional buttons -->
      <div class="buttons" *ngIf="services.activeUser.accountTypeId === '2'">
        <button (click)="goToDeliveryOrdersWaiter()">Delivery</button>
      </div>
      <div class="buttons" *ngIf="services.activeUser.accountTypeId !== '2'">
        <button (click)="goToDeliveryView()">Deliveries</button>
      </div>
      <div class="buttons" *ngIf="services.activeUser.accountTypeId !== '2'">
        <button (click)="goToReservarionView()">Reservations</button>
      </div>
      <div class="buttons" *ngIf="services.activeUser.accountTypeId !== '2'">
        <button (click)="goToChangePassword()">Change password</button>
      </div>

      <!-- Always visible buttons -->
      <div class="buttons">
        <button (click)="goToProfile()">Profile</button>
      </div>
      <div class="buttons">
        <button (click)="logout()">Logout</button>
      </div>
      <div class="buttons" *ngIf="services.activeUser.accountTypeId !== '2'">
        <button (click)="toggleBasket()">Basket</button>
      </div>
    </header>

    <div class="user-info">
      <h2>User Information</h2>

      <div *ngIf="services.activeUser.accountTypeId !== '2'">
        <p>
          <strong>Credit Card No:</strong>
          {{ services.activeUser.creditCardNo }}
        </p>
      </div>
      <p><strong>Email:</strong> {{ services.activeUser.email }}</p>
      <p>
        <strong>Contact Phone:</strong> {{ services.activeUser.contactPhone }}
      </p>
      <p><strong>Last Name:</strong> {{ services.activeUser.lastName }}</p>
      <p><strong>First Name:</strong> {{ services.activeUser.firstName }}</p>
      <p><strong>Address:</strong> {{ services.activeUser.address }}</p>

      <div>
        <img [src]="services.activeUser.profilePicture" alt="Profile Picture" />
      </div>

      <!-- Update Button -->
      <button class="update-button" (click)="toggleEdit()">
        Edit Information
      </button>

      <!-- Edit Form -->
      <form *ngIf="isEditMode" class="edit-form">
        <div *ngIf="services.activeUser.accountTypeId !== '2'">
          <div class="form-group">
            <label for="editCreditCardNo">Credit Card No:</label>
            <input
              type="text"
              id="editCreditCardNo"
              [(ngModel)]="editedUser.creditCardNo"
              name="editCreditCardNo"
              required
            />
          </div>
        </div>
        <div class="form-group">
          <label for="editEmail">Email:</label>
          <input
            type="email"
            id="editEmail"
            [(ngModel)]="editedUser.email"
            name="editEmail"
            required
          />
        </div>
        <div class="form-group">
          <label for="editContactPhone">Contact Phone:</label>
          <input
            type="text"
            id="editContactPhone"
            [(ngModel)]="editedUser.contactPhone"
            name="editContactPhone"
            required
          />
        </div>
        <div class="form-group">
          <label for="editLastName">Last Name:</label>
          <input
            type="text"
            id="editLastName"
            [(ngModel)]="editedUser.lastName"
            name="editLastName"
            required
          />
        </div>
        <div class="form-group">
          <label for="editFirstName">First Name:</label>
          <input
            type="text"
            id="editFirstName"
            [(ngModel)]="editedUser.firstName"
            name="editFirstName"
            required
          />
        </div>
        <div class="form-group">
          <label for="editAddress">Address:</label>
          <input
            type="text"
            id="editAddress"
            [(ngModel)]="editedUser.address"
            name="editAddress"
            required
          />
        </div>
        <div class="form-group">
          <label for="editProfilePicture">Profile Picture:</label>
          <input
            type="file"
            id="editProfilePicture"
            (change)="onEditFileSelected($event)"
            name="editProfilePicture"
          />
        </div>
        <button type="button" (click)="saveChanges()">Save Changes</button>
        <span class="errorClass">{{ message }}</span>
      </form>
    </div>
    <br />
    <br />
    <br />
    <br />
    <div class="footer">
      <p>&copy; 2024 pravi majstor. All rights reserved.</p>
    </div>
  </body>
</html>
